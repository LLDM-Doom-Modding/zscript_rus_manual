# Объвление структур и классов

Структуры и классы в ZScript разделены не так сильно. С натяжкой можно сказать, что структуры — это классы с порезанными правами, всегда полностью доступные в своей области видимости, не имеющие права на создание объектов-экземпляров с себя (см. "Номенклатура" [ZScript. Введение. Основные понятия]) и без возможности иметь другие структуры. Оба типа — классы, структуры — могут включать в себя и константы, и перечислимые типы (тогда они будут "видны" лишь внутри этой структуры/класса), но помимо них — ещё и переменные, и методы.

_m8f: Они сильно отличаются. Например, ненативные структуры нельзя использовать в качестве параметров, и возвращать из функций их нельзя. Зато они легче чем классы._

Порядок блоков может варьироваться в зависимости от нужды, так как он не имеет значения.

```
struct <имя_структуры> {
    [<константа> = <значение>;
    [...]]

    [<перечислимый_тип> ;
    [...]]

    <тип_переменной> <имя_поля_структуры>;
    [...]

    [<метод_структуры>;
    [...]]
}
[...]
```

Так как класс является описанием именно действующих лиц (объектов) — он должен быть более гибким, чем структура. В нём возможно наследование (см. "Номенклатура"), добавление вложенных структур и, в случае создания объектов мира (более известных даже в Decorate как "акторы"/"актёры" — "Actors"), ещё и код взаимодействия с игровой вселенной.

```
class <имя_класса> [: <от_кого_наследуется>] {
    [<константа> = <значение>;
    [...]]

    [<перечислимый_тип>;
    [...]]

    [<структура>;
    [...]]

    [<default-блок>;] // В случае наследования от класса Actor или его потомков.

    [<тип_переменной> <имя_переменной>;
    [...]]

    [<метод_класса>
    [...]]

    [<states-блок>] // В случае наследования от класса Actor или его потомков.
}
[...]
```


## Пример синтаксиса (скорее всего, будет куда-либо перенесён)

```
version "2.4.0"

#include "constants.zsc"        // Положим, здесь лежат второстепенные константы.
#include "zscript/weapons.zsc"
#include "zscript/monsters.zsc"
#include "zscript/npcs.zsc"

enum NPCTeams {
    NPCT_Neutral = 0,
    NPCT_Normal = NPCT_Neutral // ...Почему бы и нет?
    NPCT_Red,                  // == "NPCT_Neutral + 1", то есть "1".
    NPCT_Yellow,               // "2".
    NPCT_Green,
    NPCT_Blue, 
    NPCT_Gray,                 // "5".

    NPCT_Quantity = NPCT_Gray
    // Чтобы каждый раз не вспоминать, какая там команда у нас последняя -- делаем себе упрощение (здесь будет "NPCT_Gray", то есть "5").
}

class BaseNPC: Actor {
    uint team;
    double bravefactor;

    Default {
        Monster;
        +FRIENDLY;
        Health 100;
    }

    override void BeginPlay() {
        team = Random( NPCT_Neutral, NPCT_Quantity ); // Пользуемся упрощением...
        bravefactor = FRandom( 0.1, 1.0 );
        Super.BeginPlay();
    } // of override void BeginPlay() {
}
```



## Указатели на экземпляры классов

Указатели служат, как можно понять по названию, для указания процессору, с каким конкретно объектом ему нужно работать. Фактически, количество типов указателей неограничено, так как любой новый написанный класс уже порождает тип указателя. Так что ниже, приведены самые основополагающие из них (с каждым можно ознакомиться подробнее в соответствущей статье).

```
Actor
// Указатель на объект типа "Actor". Как раз акторами и являются все
//объекты в игровом мире -- игроки, монстры, оружие, декорации, 
//файерболы, дымок от пуль, источники динамического света и так далее.
// Класс "Actor" наследуется от класса "Thinker".

Thinker
// Thinker -- любой объект, имеющий право хоть как-то взаимодействовать
//с миром. Это, собственно, все акторы, эффекты секторов, "сущности" 
//ботов, декали, маркеры автокарты и иные объекты, прямо или косвенно
//связанные с игровым миром.
// Наследуется от "Object".

Object
// Разработчики ZScript решили всех запутать и сделали класс c названием
//"Object". Фактически это просто удобная оболочка для мира для 
//стандартного "пустого" класса.

ThinkerIterator
ActorIterator
// Вспомогательные объекты, позволяют перебрать всех Thinker'ов в мире,
//удовлетворяющих фильтру наследования.

BlockThingsIterator
BlockLinesIterator
// Вспомогательные объекты, используются для перебора всех блокирующих
//линий или акторов вокруг определённого актора или определённой позиции
//в мире.
```

Дерево наследований объектов мира. Через "<...>" обозначены остальные, не основные классы. На наследование самописных это никак не влияет.

```
Object

  Thinker
  > Actor              // Decorate умеет работать только с акторами...
  |   Inventory        // Базовый класс инвентаря.
  |     StateProvider
  |       CustomInventory
  |       Weapon       // Базовый класс оружия.
  |         <...>
  |     Powerup        // Базовый класс Powerup'ов.
  |       <...>
  |     PowerupGiver
  |     <...>
  |   <...>
  > SectorEffect
  |   Lighting
  |   Mover
  |     MovingFloor
  |       Floor
  |     MovingCeiling
  |       Ceiling
  | <...>

  ThinkerIterator
  ActorIterator
  BlockThingsIterator
  BlockLinesIterator

  <...>
```

