# Ошибки при компиляции и варианты их решения

_Если найдёте какую-либо ошибку, которой здесь нет — пишите с пояснением, какой код привёл к ней._

---

## Ошибки синтаксиса

"`Unexpected '<строка>'`": ошибка в синтаксисе, вместо указанной строки компилятор ожидал встретить что-то другое. Сообщение встречается в совершенно разных ситуациях, так что точнее сказать ничего не могу. Единственное что, если на месте строки стоит знак равенства, то, возможно, была попытка инициализации глобальной переменной.

"`Unexpected character: <символ> (ASCII <код>)`": в коде ZScript нельзя использовать символы, которые не принадлежат латинскому алфавиту, цифрам или международным знакам пунктуации. К комментариям это не относится.

"`Invalid global identifier '<идентификатор>'`": в текущем классе нет такого идентификатора: ни поля, ни константы, ни метода.

"`Unknown identifier '<идентификатор>'`": в вызываемом классе нет такого идентификатора.

"`Unknown function <имя_метода>`": в вызываемом классе нет такого метода (от предыдущего компилятор отличает наличием в коде скобок после идентификатора).

"`Function '<имя_метода>' used without ().`": вызывается существующий метод, а скобки забыты.

"`Compound initializer not implemented yet`": пока что инициализировать массивы значениями сразу (через "`= { <знач1>, <знач2>, ... };`") нельзя.

"`Invalid expression on left hand side of <имя>`": не удалось разобрать выражение слева от указанного слова.

## Ошибки переменных, массивов и их типов

"`Expression must be a modifiable value`": указанная переменная открыта только для чтения. Возможно, она помечена как `readonly` или `meta` (см. 2.09 "Модификаторы переменных и методов") или произошло вторжение в запрещённую сферу влияния (см. 2.08 "Сферы влияния").

"`Cannot convert <тип_1> to <тип_2>`": попытка присвоить несовместимый тип. Например, присвоение указателю какого-то числа, или массиву — какой-то строки.

"`Numeric type expected`": фактически, тот же "Cannot convert...", но с уточнением, что конечный тип принадлежит множеству чисел. Встречается при указании индекса массива не целочисленным значением, а также в попытке передать не число в числовое свойство.

"`Cannot convert to string`": то же самое, но на этот раз не удалось привести к строке. Проще всего это обойти, добавив принудительную конкатенацию с пустой строкой: "`"" .. <нестроковый_идентификатор>`" (см. 1.08 "Строки").

"`Array index out of bounds`": константное значение индекса статического массива лежит вне его пределов. Не стоит забывать, что нумерация в них всегда начинается с нуля и всегда заканчивается значением `n - 1`, а не `n` (см. 1.09 "Массивы").

"`Cannot cast a readonly pointer`": указатели, объявленные как "Только для чтения", из соображений безопасности невозможно привести к какому-либо другому типу (см. 2.07 "Указатель на класс, шаблоны "class<>" и "readonly<>").

"`<имя_переменной>: Base type for dynamic array types must be integral, but got <тип>`": указанный тип для динамического массива оказался слишком сложным. Например, другой динамический массив.

"`Internal error when generating code for array access`": ошибка появлялась на старых версиях при попытке проложить маршрут в динамический массив из-под другого динамического массива (см. 1.09 "Массивы", подраздел "Многомерный динамический массив").

## Ошибки методов

"`All arguments after the first optional one need also be optional`": обязательный аргумент появился после аргумента со значением по умолчанию (см. 1.10 "Методы", подраздел "Синтаксис").

"`Too many arguments in call to <имя_метода>`"/"`Insufficient arguments in call to <имя_метода>`": количество переданных в метод аргументов больше/меньше того, что метод может принять.

## Ошибки специальных ключевых слов и конструкций

#### Default-блок

"`Non-actor classes may not have defaults`": класс не наследован от `Actor`, в нём невозможно использовать специфичный блок "`Default {}`" (см. 2.04 "Класс "Actor"").

"`@property@<имя_класса>.<имя_свойства>' is an unknown actor property`": такого свойства не существует у указанного актора. Если свойство создано пользователем, то, возможно, забыт префикс класса (просто "MyProperty" вместо "MyClass.MyProperty").

"`Variable <имя_переменной> not found in <имя класса>`": 

"`Argument count mismatch: Got <фактическое_количество>, expected <ожидаемое_количество>`": ошибка в количестве аргументов у свойства.

"`Unable to add property <название_свойства> to class <имя_класса>`": скорее всего, свойство с таким же именем уже есть в классе.

"`unhandled property type <тип_переменной>`": попытка использовать в качестве свойства неподдерживаемый тип переменной. Простейший пример — типы "voidptr" или "PlayerPawn".

#### Сферы влияния

"`Can't call <сфера_вызываемого> function <имя_метода> from <сфера_вызывающего> context [<примечание>]`": нарушение сфер влияния, невозможно вызвать одно из-под другого; см. 2.08 "Сферы влияния".

"`Can't change class scope in class <имя_класса>`": назначить иную сферу влияния классу, у которого она уже не нейтральна (который уже не просто данные), нельзя — см. 2.08 "Сферы влияния".

#### Остальное

"`Unknown native class <имя_класса>`": использовано ключевое слово "`native`" для пользовательского класса (см. 2.09 "Модификаторы переменных и методов").
- "`The function '<имя_метода>' has not been exported from the executable`": то же, но для пользовательского метода.
- "`The member variable '<имя_переменной>' has not been exported from the executable.`": то же, но для пользовательской переменной.

"`'VarArg' can only be used with native methods`": модификатор "`vararg`" невозможно использовать в пользовательских файлах, см. 2.09 "Модификаторы переменных и методов".

"`<идентификатор>: @ not allowed for user scripts`": исользовано ключевое слово "`@`" для пользовательского поля (см. 2.09 "Модификаторы переменных и методов").

## Ошибки, связанные с ООП

"`Class name <название_класса> already exists`": класс с таким именем уже существует.

"`Class <дочерний_класс> has unknown base class <родительский_класс>`": класса, указанного как родительский, не существует.

"`Invalid combination of qualifiers <модификатор_1>, <модификатор_2> on function <имя_метода>`": несовместимые модификаторы для метода. Например, объявление его одновременно статическим и виртуальным (см. 1.13).

"`Function <имя_метода> attempts to override parent function without 'override' qualifier`": попытка объявления нового метода с тем же названием вместо переопределения уже существующего виртуального (см. 1.13). Забыто слово "`override`"?

"`Attempt to override non-existent virtual function <имя_метода>`": переопределяемого метода компилятор не нашёл; чаще всего ошибка появляется из-за того, что в переопределении не совпадают типы параметров или их количество.

"`Cannot initialize non-scalar variable <имя_переменной> here`": некоторые типы переменных (в частности, пользовательские структуры) нельзя объявлять в качестве локальных.

"`Abstract method must be overrided`" _(уточнить; для ver. >= 3.4.0?)_: в дочернем классе необходимо переопределить все абстрактные методы родителя, см. 1.13 "Виртуальные методы, абстрактные классы/методы".

## Другие ошибки

"`Include script lump <путь> not found`": не удалось найти указанный в директиве `#include` файл (см. 1.05 "Синтаксис препроцессора").

"`<встроенный_метод> requires an object`": попытка вызова встроенного метода для объектов для чего-то другого (например, структуры).
 - "`<встроенный_метод> requires an actor class type`": то же, но ожидался актор.

"`Unable to resolve all fields for class <имя_класса>`": констатация факта ошибки разбора указанного класса. Появляется после некоторых других сбоев при компиляции.

