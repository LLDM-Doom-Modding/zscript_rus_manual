# Сферы влияния

Ради синхронизации в мультиплеере и в записанных демо все классы в мире принадлежат той или иной "сфере влияния" внутри движка — к миру, к интерфейсу или к общим данным. В оригинале эта система называется "Scoping", её также можно перевести как "принадлежность".



## play

Любой объект непосредственно игрового мира — актор, Thinker, LineTracer и так далее.

Синтаксис объявления для методов (_уточнить: кейворд можно ставить и до, и после объявления_):

```CPP
play void Something() {
    // ...
}
```

Синтаксис объявления для класса:

```CPP
class Something play {
    // ...
}
```

Наследовать от класса, принадлежащего игровому миру, класс другой области влияния нельзя.



## ui

Любой объект пользовательского интерфейса. Не записывается в демо и не передаётся кому-либо в мультплеере.

Синтаксис объявления для методов (_уточнить: кейворд можно ставить и до, и после объявления_):

```CPP
ui void Something() {
    // ...
}
```

Синтаксис объявления для класса:

```CPP
class Something ui {
    // ...
}
```

Также, как и в `play`, изменить область влияния при наследовании нельзя.


## data

Всё, что не относится к предыдущим двум пунктам; просто некие нейтральные данные.

Синтаксис объявления для методов ("очищаем" предыдущую назначенную область влияния):

```CPP
clearscope void Something() {
    // ...
}
```

Любой класс, не наследованный от `play` или `ui`, по умолчанию принадлежит сфере влияния данных — поэтому ключевого слова для классов нет. От класса данных можно наследовать в обе других сферы влияния — и в `play`, и в `ui`.



## Таблица взаимодействий

Если не указано чего-либо иного явно, то все методы внутри класса с модификатором "`play`" будут относиться к игровому миру; все методы внутри класса с модификатором "`ui`" — к интерфейсу; все методы в классах без модификаторов — соответственно, к данным.

Далее представлена таблица возможности взаимодействия разных сфер влияния друг с другом. "r/o" — "только для чтения"; любое другое обозначение, кроме "+++", показывает невозможность обращения к методам вызываемого контекста:

```md
               Вызываемое
           ║play │ ui  │data
     ╒═════╬═════╪═════╪════
 Кто │play ║ +++ │  -  │ +++
вызы-│ui   ║ r/o │ +++ │ +++
вает │data ║ r/o │  -  │ +++
```

Из-под `play`:
 * Можно свободно читать/записывать и в `play`, и в `data`;
 * Не удастся сделать хоть что-нибудь с пользовательским интерфейсом.

Из-под `ui`:
 * Свободное чтение/запись в `ui` и в `data`;
 * Можно только видеть игровую вселенную.

Из-под `data`:
 * Нет ограничений на чтение/запись в свою область влияния — в `data`;
 * Игровую вселенную можно лишь видеть;
 * `ui` недоступен вовсе.
